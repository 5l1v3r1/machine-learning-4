#!/bin/bash
# note: this file is executed from 'bash_loader' , this is why the
#       directory paths seem to be too short (i.e. missing extra '..')

# Pre-Pathing: allow 'uglifyjs' command
PATH="/usr/local/bin:$PATH"

# create directory if doesn't exist
mkdir -p ../html/machine-learning/asset/js/

# track execution of script
set -x; exec > log/log_bash_web 2>&1

# Minify Javascript
for file_with_path in ../src/js/*.js; do
  # filename (without extension)
  file="${file_with_path##*/}"
  filename="${file%.*}"

  # minifiy with 'uglifyjs'
  uglifyjs -c --output ../html/machine-learning/asset/js/$filename.min.js $file_with_path
done

# Compile CSS
for file_with_path in ../src/scss/*.scss; do
  # filename (without extension)
  file="${file_with_path##*/}"
  filename="${file%.*}"

  # compile with 'sass'
  sass ../html/machine-learning/asset/scss/$filename.min.css $file_with_path
done
